# vim: set filetype=sh:
# see /usr/share/doc/bash/examples/startup-files (in the package bash-doc)
# for examples

# don't export it because we only want it in interactive shells
CDPATH=.:~/:~/projects

# enable color support of ls and also add handy aliases
if [ "$TERM" != "dumb" ]; then
  if [[ $OSTYPE =~ ^darwin ]]; then
    alias ls='ls -G'
  else
    alias ls='ls --color=auto'
  fi
fi

if [[ ! -x $(command -v pbcopy) ]]; then
  # On linux we can still do a pbcopy like thing
  alias pbcopy='xclip -selection clipboard'
  alias pbpaste='xclip -selection clipboard -o'
fi

# some more aliases
alias ll='ls -l'
alias la='ls -a'

alias c='clear'
alias cpwd="pwd | ruby -pe'\$_.chomp!' | pbcopy" # copy path to clipboard

# This breaks scripts, it's not a good idea
# alias grep='grep --color --line-number'

# if neovim is available, then use that
# if not, bu MacVim is available, then use that
if [[ -x $(command -v nvim) ]]; then
  alias vim='nvim -N'
  alias vi='nvim -N'
elif [[ -x $(command -v mvim) ]] ; then
  alias vim='mvim -v -N'
  alias vi='mvim -v -N'
  alias gvim='mvim -p'
fi

# handle my muscle memory of typing mvim
if [[ -x $(command -v gvim) ]] ; then
  alias mvim="gvim"
fi

alias mv='mv -i' # prompt before moving a file that would overwrite an existing file
alias lop='sudo lsof -i -P | grep -i "listen"' # show open ports

if [[ $OSTYPE =~ ^darwin ]]; then
  alias icons='cd ~/Pictures/icons; open -a Preview **/*.png **/*.tiff  **/*.jpg'
  alias preview='open -a Preview'
fi

# Rails
alias bx='bundle exec'
alias devlog='tail -200 -f log/development.log'
alias bxr='bundle exec rspec'
alias testlog='tail -200 -f log/test.log'

# Git
alias gitrm='git ls-files -z --deleted | xargs -0 git rm'
alias gitx='gitx --all'
alias gpci='git-pair commit'
alias gp='git pair'
alias gst='git status'
alias gc='git commit'
alias gd='git diff'
alias gdc='git diff --cached'
alias getch='git fetch'
alias gf='git br -a | grep '

# Docker
# Kill all running containers.
alias dockerkillall='docker kill $(docker ps -q)'

# Delete all stopped containers.
alias dockercleanc='printf "\n>>> Deleting stopped containers\n\n" && docker rm $(docker ps -a -q)'

# Delete all untagged images.
alias dockercleani='printf "\n>>> Deleting untagged images\n\n" && docker rmi $(docker images -q -f dangling=true)'

# Delete all stopped containers and untagged images.
alias dockerclean='dockercleanc || true && dockercleani'

# alias wakewoody='wakeonlan -i 192.168.2.255 70:85:C2:A1:B9:CE'
alias wakechomsky='wakeonlan -i 192.168.2.255 a8:a1:59:dc:68:99'

